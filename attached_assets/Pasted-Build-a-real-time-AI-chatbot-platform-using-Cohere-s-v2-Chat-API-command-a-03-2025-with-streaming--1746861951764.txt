Build a real-time AI chatbot platform using Cohereâ€™s v2 Chat API (command-a-03-2025) with streaming, ensuring:

ğŸ”’ API key security (no exposure on client)

ğŸŒ All responses auto-return in Sorani Kurdish, regardless of user input language

âš¡ Token-by-token streaming to the frontend UI

ğŸ’¬ Full Sorani RTL layout in Next.js frontend

ğŸ”§ Backend â€“ FastAPI (Python)
âœ”ï¸ Responsibilities:
Handle incoming user messages from the frontend

Call Cohereâ€™s chat_stream method securely using ClientV2

Enforce Sorani Kurdish-only responses by injecting system prompt

Stream each token using Server-Sent Events (SSE) to the frontend

ğŸ§ª Cohere Streaming Endpoint Example
python
Copy
Edit
import cohere
from fastapi import FastAPI, Request
from fastapi.responses import StreamingResponse

co = cohere.ClientV2("YOUR_COHERE_API_KEY")
app = FastAPI()

@app.get("/api/stream")
def stream_chat(message: str):
    def stream():
        messages = [
            {"role": "system", "content": "Always respond only in Sorani Kurdish, no matter the input language."},
            {"role": "user", "content": message}
        ]
        response = co.chat_stream(
            model="command-a-03-2025",
            messages=messages
        )
        for event in response:
            if event.type == "content-delta":
                text = event.delta.message.content.text
                yield f"data: {text}\n\n"
    return StreamingResponse(stream(), media_type="text/event-stream")
ğŸ’» Frontend â€“ Next.js (React + TypeScript)
âœ”ï¸ Responsibilities:
Use EventSource (SSE) to receive streamed tokens from FastAPI backend

Update chat UI token-by-token

Display in RTL layout with Sorani font styling

Auto-scroll as tokens arrive

ğŸ§ª TypeScript Streaming Hook
ts
Copy
Edit
export function streamFromServer(message: string, onToken: (token: string) => void) {
  const eventSource = new EventSource(`/api/stream?message=${encodeURIComponent(message)}`);

  eventSource.onmessage = (event) => {
    onToken(event.data); // Append each streamed token to UI
  };

  eventSource.onerror = () => {
    console.error("Stream error");
    eventSource.close();
  };
}
ğŸ¯ Key Design Principles
Goal	Implementation Strategy
ğŸ” Secure API Key	Keep Cohere calls entirely on the backend â€” never expose API key in the browser
ğŸŒ Force Sorani Kurdish Output	Always prepend system message: â€œRespond only in Sorani Kurdish regardless of input.â€
âš¡ Fast Streaming Experience	Use FastAPI + SSE for ultra-low-latency delivery to the frontend
ğŸ’¬ Natural Chat Flow	Token-by-token streaming in React via EventSource
ğŸ“² Mobile-first Responsive UI	Use Tailwind CSS + Shadcn/UI, fully RTL for Sorani
ğŸ§  Intelligent AI	Use Cohereâ€™s command-a-03-2025 â€” latest model with context-aware logic